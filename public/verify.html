<!DOCTYPE html>
<html>
<head>
  <title>Email Verification</title>
</head>
<body>
  <script>
    // Extract the token from the URL query string
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token');
    if (token) {
      // Send a POST request to the Power Automate endpoint
      fetch('https://prod-68.westeurope.logic.azure.com:443/workflows/270c59bf12d847cdb8e00eb279cc3186/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=cyxWdcPlG-yCkrhFrv8UAlSd6o_4uWtNgZlCC9CVYOI', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ token: token })
      })
      .then(response => response.json())
      .then(data => {
        // On success, show a confirmation message
        document.body.innerHTML = '<h2>Email verified successfully!</h2>';
      })
      .catch(err => {
        console.error(err);
        document.body.innerHTML = '<h2>Verification failed. Please try again later.</h2>';
      });
    } else {
      document.body.innerHTML = '<h2>No verification token found in the URL.</h2>';
    }
  </script>
</body>
</html>
